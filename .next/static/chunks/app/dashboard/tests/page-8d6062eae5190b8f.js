(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5823],{30046:(e,s,t)=>{Promise.resolve().then(t.bind(t,87874))},63495:(e,s,t)=>{"use strict";t.d(s,{B:()=>i});var a=t(25784);let i={getAll:async()=>(await a.A.get("/categories")).data,getById:async e=>(await a.A.get("/categories/".concat(e))).data,create:async e=>(await a.A.post("/categories",e)).data,update:async(e,s)=>(await a.A.put("/categories/".concat(e),s)).data,delete:async e=>(await a.A.delete("/categories/".concat(e))).data}},74719:(e,s,t)=>{"use strict";t.d(s,{C:()=>i});var a=t(25784);let i={getAll:async()=>(await a.A.get("/test-series")).data,getById:async e=>(await a.A.get("/test-series/".concat(e))).data,getByCategory:async e=>(await a.A.get("/test-series/category/".concat(e))).data,create:async e=>(await a.A.post("/test-series",e)).data,update:async(e,s)=>(await a.A.put("/test-series/".concat(e),s)).data,delete:async e=>(await a.A.delete("/test-series/".concat(e))).data}},87874:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Y});var a=t(95155),i=t(12115),l=t(97168),r=t(89852),n=t(53904),c=t(20690),d=t(84616),o=t(47924),m=t(14186),x=t(17580),u=t(16785),h=t(5623),g=t(92657),j=t(13717),v=t(29869),p=t(62525),f=t(51154),N=t(88524),y=t(67133),b=t(88145),w=t(95784),C=t(99840),S=t(82714),k=t(99474),A=t(53580),E=t(5040),F=t(25784);let T={getAll:async()=>(await F.A.get("/tests")).data,create:async e=>(await F.A.post("/tests",e)).data,generateFromBank:async e=>(await F.A.post("/tests/generate",e)).data,update:async(e,s)=>(await F.A.put("/tests/".concat(e),s)).data,delete:async e=>(await F.A.delete("/tests/".concat(e))).data};var M=t(74719);function J(e){let{isOpen:s,onClose:t,test:n,mode:c,onSuccess:d}=e,[o,m]=(0,i.useState)({title:"",description:"",duration:60,totalQuestions:0,difficulty:"Medium",category:"",testSeries:"",questions:[],attempts:0,avgScore:0,completedUsers:[],isPremium:!1,isNegativeMarking:!1,negativeMarkingFactor:0}),[h,g]=(0,i.useState)([]),[j,v]=(0,i.useState)(!1),[p,N]=(0,i.useState)(!1),{toast:y}=(0,A.dj)();(0,i.useEffect)(()=>{let e=async()=>{try{N(!0);let e=await M.C.getAll();g(e)}catch(e){console.error("Error loading test series:",e)}finally{N(!1)}};s&&e()},[s]),(0,i.useEffect)(()=>{if(n&&s){var e,t,a,i;m({title:n.title||"",description:n.description||"",duration:n.duration||60,totalQuestions:n.totalQuestions||0,difficulty:n.difficulty||"Medium",category:n.category||"",testSeries:"string"==typeof n.testSeries?n.testSeries:(null===(e=n.testSeries)||void 0===e?void 0:e.id)||"",questions:n.questions||[],attempts:n.attempts||0,avgScore:n.avgScore||0,completedUsers:n.completedUsers||[],isPremium:null!==(t=n.isPremium)&&void 0!==t&&t,isNegativeMarking:null!==(a=n.isNegativeMarking)&&void 0!==a&&a,negativeMarkingFactor:null!==(i=n.negativeMarkingFactor)&&void 0!==i?i:0})}else!n&&s&&m({title:"",description:"",duration:60,totalQuestions:0,difficulty:"Medium",category:"",testSeries:"none",questions:[],attempts:0,avgScore:0,completedUsers:[],isPremium:!1,isNegativeMarking:!1,negativeMarkingFactor:0})},[n,s]);let b=async e=>{if(e.preventDefault(),"view"!==c){v(!0);try{"create"===c?(await T.create(o),y({title:"Test created",description:"".concat(o.title," has been created successfully.")})):(await T.update(n.id,o),y({title:"Test updated",description:"".concat(o.title," has been updated successfully.")})),null==d||d(),t()}catch(e){var s,a;y({title:"Error",description:(null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.error)||e.message||"Something went wrong",variant:"destructive"})}finally{v(!1)}}},F=h.find(e=>e.id===o.testSeries);return(0,a.jsx)(C.lG,{open:s,onOpenChange:t,children:(0,a.jsxs)(C.Cf,{className:"sm:max-w-[600px] w-full max-w-full max-h-[90vh] overflow-y-auto bg-white dark:bg-slate-900 border shadow-xl rounded-xl p-2 sm:p-4",children:[(0,a.jsxs)(C.c7,{className:"space-y-3",children:[(0,a.jsx)(C.L3,{className:"text-xl font-semibold",children:(()=>{switch(c){case"create":return"Create Test";case"edit":return"Edit Test";case"view":return"View Test";default:return"Test"}})()}),(0,a.jsx)(C.rr,{className:"text-muted-foreground",children:(()=>{switch(c){case"create":return"Add a new test to your platform.";case"edit":return"Make changes to the test here.";case"view":return"Test details and information.";default:return""}})()})]}),(0,a.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"title",className:"text-sm font-medium",children:"Test Title *"}),(0,a.jsx)(r.p,{id:"title",value:o.title,onChange:e=>m({...o,title:e.target.value}),required:!0,disabled:"view"===c,placeholder:"Enter test title",className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"description",className:"text-sm font-medium",children:"Description"}),(0,a.jsx)(k.T,{id:"description",value:o.description,onChange:e=>m({...o,description:e.target.value}),rows:3,disabled:"view"===c,placeholder:"Enter test description",className:"w-full resize-none"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"testSeries",className:"text-sm font-medium",children:"Test Series"}),(0,a.jsxs)(w.l6,{value:o.testSeries,onValueChange:e=>m({...o,testSeries:e}),disabled:"view"===c||p,children:[(0,a.jsx)(w.bq,{children:(0,a.jsx)(w.yv,{placeholder:p?"Loading...":"Select test series"})}),(0,a.jsxs)(w.gC,{children:[(0,a.jsx)(w.eb,{value:"none",children:"No Test Series"}),h.map(e=>(0,a.jsx)(w.eb,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{children:e.icon}),(0,a.jsx)("span",{children:e.title})]})},e.id))]})]}),F&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Selected: ",F.icon," ",F.title]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"category",className:"text-sm font-medium",children:"Category *"}),(0,a.jsx)(r.p,{id:"category",value:o.category,onChange:e=>m({...o,category:e.target.value}),required:!0,disabled:"view"===c,placeholder:"e.g., Physics, Mathematics"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-6 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"totalQuestions",className:"text-sm font-medium",children:"Total Questions *"}),(0,a.jsx)(r.p,{id:"totalQuestions",type:"number",value:o.totalQuestions,onChange:e=>m({...o,totalQuestions:Number.parseInt(e.target.value)||0}),required:!0,disabled:"view"===c,placeholder:"0",min:"1"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"duration",className:"text-sm font-medium",children:"Duration (minutes) *"}),(0,a.jsx)(r.p,{id:"duration",type:"number",value:o.duration,onChange:e=>m({...o,duration:Number.parseInt(e.target.value)||60}),required:!0,disabled:"view"===c,placeholder:"60",min:"1"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"difficulty",className:"text-sm font-medium",children:"Difficulty *"}),(0,a.jsxs)(w.l6,{value:o.difficulty,onValueChange:e=>m({...o,difficulty:e}),disabled:"view"===c,children:[(0,a.jsx)(w.bq,{children:(0,a.jsx)(w.yv,{})}),(0,a.jsxs)(w.gC,{children:[(0,a.jsx)(w.eb,{value:"Easy",children:"Easy"}),(0,a.jsx)(w.eb,{value:"Medium",children:"Medium"}),(0,a.jsx)(w.eb,{value:"Hard",children:"Hard"})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-start justify-center gap-1 pt-6",children:[(0,a.jsxs)(S.J,{htmlFor:"isPremium",className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(r.p,{id:"isPremium",type:"checkbox",checked:o.isPremium,onChange:e=>m({...o,isPremium:e.target.checked}),disabled:"view"===c,className:"w-4 h-4 accent-blue-600"}),"Premium"]}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Is this a premium test?"})]}),(0,a.jsxs)("div",{className:"flex flex-col items-start justify-center gap-1 pt-6",children:[(0,a.jsxs)(S.J,{htmlFor:"isNegativeMarking",className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(r.p,{id:"isNegativeMarking",type:"checkbox",checked:o.isNegativeMarking,onChange:e=>m({...o,isNegativeMarking:e.target.checked}),disabled:"view"===c,className:"w-4 h-4 accent-red-600"}),"Negative Marking"]}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Enable negative marking for this test."})]}),(0,a.jsxs)("div",{className:"flex flex-col items-start justify-center gap-1 pt-6",children:[(0,a.jsx)(S.J,{htmlFor:"negativeMarkingFactor",className:"text-sm font-medium",children:"Negative Marking Factor"}),(0,a.jsx)(r.p,{id:"negativeMarkingFactor",type:"number",value:o.negativeMarkingFactor,onChange:e=>m({...o,negativeMarkingFactor:Number.parseFloat(e.target.value)||0}),required:o.isNegativeMarking,disabled:"view"===c||!o.isNegativeMarking,placeholder:"0",min:"0",step:"0.01",className:"w-24 sm:w-32"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Set to 0 for no negative marking."})]})]}),"view"===c&&(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-6 gap-4 p-4 bg-muted/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 text-muted-foreground"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:o.attempts}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Attempts"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 text-muted-foreground"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-sm font-medium",children:[o.avgScore.toFixed(1),"%"]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Avg Score"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(E.A,{className:"w-4 h-4 text-muted-foreground"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:o.completedUsers.length}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Completed"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(S.J,{className:"text-sm font-medium mr-2",children:"Premium:"}),(0,a.jsx)("span",{className:"text-xs font-semibold ".concat(o.isPremium?"text-green-600":"text-gray-500"),children:o.isPremium?"Yes":"No"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(S.J,{className:"text-sm font-medium mr-2",children:"Negative Marking:"}),(0,a.jsx)("span",{className:"text-xs font-semibold ".concat(o.isNegativeMarking?"text-red-600":"text-gray-500"),children:o.isNegativeMarking?"Yes":"No"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(S.J,{className:"text-sm font-medium mr-2",children:"Neg. Marking Factor:"}),(0,a.jsx)("span",{className:"text-xs font-semibold",children:o.negativeMarkingFactor})]})]})]}),(0,a.jsxs)(C.Es,{className:"flex justify-end space-x-2 pt-4 border-t",children:[(0,a.jsx)(l.$,{type:"button",variant:"outline",onClick:t,children:"view"===c?"Close":"Cancel"}),"view"!==c&&(0,a.jsxs)(l.$,{type:"submit",disabled:j,className:"min-w-[100px]",children:[j&&(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}),j?"Saving...":"create"===c?"Create Test":"Update Test"]})]})]})]})})}var q=t(90088),Q=t(54416),P=t(63495);function D(e){let{isOpen:s,onClose:t,onSuccess:n}=e,[d,o]=(0,i.useState)({subject:"",topic:"",exam:"",difficulty:"Medium",previousYear:!1,year:"",totalQuestions:20,title:"",description:"",duration:60,testSeries:"none"}),[m,x]=(0,i.useState)([]),[u,h]=(0,i.useState)([]),[g,j]=(0,i.useState)([]),[v,p]=(0,i.useState)("all"),[N,y]=(0,i.useState)([]),[E,F]=(0,i.useState)([]),[J,D]=(0,i.useState)(""),[L,I]=(0,i.useState)(""),[O,Y]=(0,i.useState)(!1),[$,_]=(0,i.useState)(!1),{toast:B}=(0,A.dj)();(0,i.useEffect)(()=>{(async()=>{if(s)try{_(!0);let[e,s]=await Promise.all([P.B.getAll(),M.C.getAll()]);x(e),h(s)}catch(e){console.error("Error loading data:",e),B({title:"Error",description:"Failed to load categories and test series",variant:"destructive"})}finally{_(!1)}})()},[s,B]),(0,i.useEffect)(()=>{v&&"all"!==v?j(u.filter(e=>{var s;return("string"==typeof e.Category?e.Category:null===(s=e.Category)||void 0===s?void 0:s.id)===v})):j(u),d.testSeries&&v&&"all"!==v&&!u.some(e=>{var s;let t="string"==typeof e.Category?e.Category:null===(s=e.Category)||void 0===s?void 0:s.id;return e.id===d.testSeries&&t===v})&&o(e=>({...e,testSeries:""}))},[v,u,d.testSeries]);let V=async e=>{e.preventDefault(),Y(!0);try{let e={...d,exam:N.length>0?N:void 0,year:E.length>0?E:void 0},s=await T.generateFromBank(e);B({title:"Test generated successfully",description:"Generated test with ".concat(s.test.totalQuestions," questions from ").concat(s.totalAvailable," available questions.")}),null==n||n(),t(),U()}catch(e){var s,a,i,l;B({title:"Error",description:(null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.error)||(null===(l=e.response)||void 0===l?void 0:null===(i=l.data)||void 0===i?void 0:i.message)||"Failed to generate test",variant:"destructive"})}finally{Y(!1)}},U=()=>{o({subject:"",topic:"",exam:"",difficulty:"Medium",previousYear:!1,year:"",totalQuestions:20,title:"",description:"",duration:60,testSeries:"none"}),p("all"),y([]),F([]),D(""),I("")},H=()=>{J.trim()&&!N.includes(J.trim())&&(y([...N,J.trim()]),D(""))},G=e=>{y(N.filter(s=>s!==e))},z=()=>{L.trim()&&!E.includes(L.trim())&&(F([...E,L.trim()]),I(""))},R=e=>{F(E.filter(s=>s!==e))},K=(e,s)=>{"Enter"===e.key&&(e.preventDefault(),"exam"===s?H():z())},X=g.find(e=>e.id===d.testSeries);return(0,a.jsx)(C.lG,{open:s,onOpenChange:t,children:(0,a.jsxs)(C.Cf,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto bg-background border shadow-lg",children:[(0,a.jsxs)(C.c7,{className:"space-y-3",children:[(0,a.jsxs)(C.L3,{className:"text-xl font-semibold flex items-center",children:[(0,a.jsx)(c.A,{className:"mr-2 h-5 w-5"}),"Generate Test from Question Bank"]}),(0,a.jsx)(C.rr,{className:"text-muted-foreground",children:"Create a test by selecting questions from the question bank based on your criteria."})]}),(0,a.jsxs)("form",{onSubmit:V,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Test Details"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"title",className:"text-sm font-medium",children:"Test Title *"}),(0,a.jsx)(r.p,{id:"title",value:d.title,onChange:e=>o({...d,title:e.target.value}),required:!0,placeholder:"Enter test title"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"description",className:"text-sm font-medium",children:"Description"}),(0,a.jsx)(k.T,{id:"description",value:d.description,onChange:e=>o({...d,description:e.target.value}),rows:2,placeholder:"Enter test description",className:"resize-none"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"totalQuestions",className:"text-sm font-medium",children:"Total Questions *"}),(0,a.jsx)(r.p,{id:"totalQuestions",type:"number",value:d.totalQuestions,onChange:e=>o({...d,totalQuestions:Number.parseInt(e.target.value)||20}),required:!0,min:"1",max:"100"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"duration",className:"text-sm font-medium",children:"Duration (minutes) *"}),(0,a.jsx)(r.p,{id:"duration",type:"number",value:d.duration,onChange:e=>o({...d,duration:Number.parseInt(e.target.value)||60}),required:!0,min:"1"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"category",className:"text-sm font-medium",children:"Category (Filter Test Series)"}),(0,a.jsxs)(w.l6,{value:v,onValueChange:p,disabled:$,children:[(0,a.jsx)(w.bq,{children:(0,a.jsx)(w.yv,{placeholder:$?"Loading...":"Select category"})}),(0,a.jsxs)(w.gC,{children:[(0,a.jsx)(w.eb,{value:"all",children:"All Categories"}),m.map(e=>(0,a.jsx)(w.eb,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{children:e.icon}),(0,a.jsx)("span",{children:e.name})]})},e.id))]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"testSeries",className:"text-sm font-medium",children:"Test Series"}),(0,a.jsxs)(w.l6,{value:d.testSeries,onValueChange:e=>o({...d,testSeries:e}),disabled:$,children:[(0,a.jsx)(w.bq,{children:(0,a.jsx)(w.yv,{placeholder:$?"Loading...":"Select test series (optional)"})}),(0,a.jsxs)(w.gC,{children:[(0,a.jsx)(w.eb,{value:"none",children:"No Test Series"}),g.map(e=>(0,a.jsx)(w.eb,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{children:e.icon}),(0,a.jsx)("span",{children:e.title})]})},e.id))]})]}),X&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Category: ",(e=>{if("string"==typeof e){let s=m.find(s=>s.id===e);return s?"".concat(s.icon," ").concat(s.name):"Unknown"}return e?"".concat(e.icon," ").concat(e.name):"Unknown"})(X.Category)]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Question Selection Criteria"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"subject",className:"text-sm font-medium",children:"Subject"}),(0,a.jsx)(r.p,{id:"subject",value:d.subject,onChange:e=>o({...d,subject:e.target.value}),placeholder:"e.g., Physics, Mathematics"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"topic",className:"text-sm font-medium",children:"Topic"}),(0,a.jsx)(r.p,{id:"topic",value:d.topic,onChange:e=>o({...d,topic:e.target.value}),placeholder:"e.g., Mechanics, Algebra"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"difficulty",className:"text-sm font-medium",children:"Difficulty Level"}),(0,a.jsxs)(w.l6,{value:d.difficulty,onValueChange:e=>o({...d,difficulty:e}),children:[(0,a.jsx)(w.bq,{children:(0,a.jsx)(w.yv,{})}),(0,a.jsxs)(w.gC,{children:[(0,a.jsx)(w.eb,{value:"any",children:"Any Difficulty"}),(0,a.jsx)(w.eb,{value:"easy",children:"Easy"}),(0,a.jsx)(w.eb,{value:"medium",children:"Medium"}),(0,a.jsx)(w.eb,{value:"hard",children:"Hard"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(S.J,{className:"text-sm font-medium",children:"Exams"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(r.p,{value:J,onChange:e=>D(e.target.value),onKeyPress:e=>K(e,"exam"),placeholder:"Enter exam name (e.g., JEE, NEET)",className:"flex-1"}),(0,a.jsx)(l.$,{type:"button",onClick:H,size:"sm",variant:"outline",children:"Add"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:N.map((e,s)=>(0,a.jsxs)(b.E,{variant:"secondary",className:"flex items-center gap-2",children:[e,(0,a.jsx)(Q.A,{className:"w-3 h-3 cursor-pointer",onClick:()=>G(e)})]},s))})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(q.d,{id:"previousYear",checked:d.previousYear,onCheckedChange:e=>o({...d,previousYear:e})}),(0,a.jsx)(S.J,{htmlFor:"previousYear",className:"text-sm font-medium",children:"Include Previous Year Questions Only"})]}),d.previousYear&&(0,a.jsxs)("div",{className:"space-y-3 ml-6",children:[(0,a.jsx)(S.J,{className:"text-sm font-medium",children:"Years"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(r.p,{value:L,onChange:e=>I(e.target.value),onKeyPress:e=>K(e,"year"),placeholder:"Enter year (e.g., 2023, 2022)",className:"flex-1"}),(0,a.jsx)(l.$,{type:"button",onClick:z,size:"sm",variant:"outline",children:"Add"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:E.map((e,s)=>(0,a.jsxs)(b.E,{variant:"secondary",className:"flex items-center gap-2",children:[e,(0,a.jsx)(Q.A,{className:"w-3 h-3 cursor-pointer",onClick:()=>R(e)})]},s))})]})]})]})]}),(0,a.jsxs)(C.Es,{className:"flex justify-end space-x-2 pt-4 border-t",children:[(0,a.jsx)(l.$,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),(0,a.jsxs)(l.$,{type:"submit",disabled:O,className:"min-w-[120px]",children:[O&&(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}),O?"Generating...":"Generate Test"]})]})]})]})})}var L=t(16559),I=t(27737),O=t(71519);function Y(){let[e,s]=(0,i.useState)([]),[t,C]=(0,i.useState)([]),[S,k]=(0,i.useState)([]),[E,F]=(0,i.useState)([]),[q,Q]=(0,i.useState)([]),[Y,$]=(0,i.useState)(""),[_,B]=(0,i.useState)("all"),[V,U]=(0,i.useState)("all"),[H,G]=(0,i.useState)("all"),[z,R]=(0,i.useState)(!1),[K,X]=(0,i.useState)(!1),[Z,W]=(0,i.useState)("create"),[ee,es]=(0,i.useState)(null),[et,ea]=(0,i.useState)(!0),[ei,el]=(0,i.useState)(!1),[er,en]=(0,i.useState)(!1),[ec,ed]=(0,i.useState)(null),[eo,em]=(0,i.useState)(!1),{toast:ex}=(0,A.dj)(),[eu,eh]=(0,i.useState)(!1),[eg,ej]=(0,i.useState)(null),ev=async()=>{try{em(!0);let[e,t,a]=await Promise.all([T.getAll(),M.C.getAll(),P.B.getAll()]);s(e),C(t),k(a)}catch(s){var e,t;ex({title:"Error",description:(null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Failed to load data",variant:"destructive"}),console.error("Error fetching data:",s)}finally{ea(!1),em(!1)}};(0,i.useEffect)(()=>{ev()},[]),(0,i.useEffect)(()=>{if("all"===_)F(t);else{let e=t.filter(e=>{var s;return("string"==typeof e.Category?e.Category:null===(s=e.Category)||void 0===s?void 0:s.id)===_});F(e),"all"===H||e.some(e=>e.id===H)||G("all")}},[_,t,H]),(0,i.useEffect)(()=>{Q(e.filter(e=>{var s,a,i;let l=e.title.toLowerCase().includes(Y.toLowerCase())||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(Y.toLowerCase()))||e.category.toLowerCase().includes(Y.toLowerCase()),r="all"===_||(()=>{if(e.testSeries){let a="string"==typeof e.testSeries?e.testSeries:e.testSeries.id,i=t.find(e=>e.id===a);if(i){var s;return("string"==typeof i.Category?i.Category:null===(s=i.Category)||void 0===s?void 0:s.id)===_}}return"all"===_})(),n="all"===V||(null===(a=e.difficulty)||void 0===a?void 0:a.toLowerCase())===V,c="all"===H||("string"==typeof e.testSeries?e.testSeries===H:(null===(i=e.testSeries)||void 0===i?void 0:i.id)===H);return l&&r&&n&&c}))},[e,t,Y,_,V,H]);let ep=e=>{es(e),W("view"),R(!0)},ef=e=>{es(e),W("edit"),R(!0)},eN=e=>{ed(e),en(!0)},ey=async()=>{if(ec)try{el(!0),await T.delete(ec.id),ex({title:"Test deleted",description:"".concat(ec.title," has been deleted successfully.")}),await ev()}catch(t){var e,s;ex({title:"Error",description:(null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.error)||"Failed to delete test",variant:"destructive"})}finally{el(!1),en(!1),ed(null)}},eb=()=>{ev()},ew=e=>{if(!e)return"No Series";if("string"==typeof e){let s=t.find(s=>s.id===e);return s?"".concat(s.icon," ").concat(s.title):"Unknown Series"}return"".concat(e.icon," ").concat(e.title)},eC=e=>{ej({id:e._id||e.id,title:e.title}),eh(!0)};return et?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(I.E,{className:"h-9 w-32"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(I.E,{className:"h-10 w-24"}),(0,a.jsx)(I.E,{className:"h-10 w-32"}),(0,a.jsx)(I.E,{className:"h-10 w-40"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(I.E,{className:"h-10 w-80"}),(0,a.jsx)(I.E,{className:"h-10 w-40"}),(0,a.jsx)(I.E,{className:"h-10 w-40"}),(0,a.jsx)(I.E,{className:"h-10 w-40"})]}),(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsx)("div",{className:"space-y-2 p-4",children:Array.from({length:5}).map((e,s)=>(0,a.jsx)(I.E,{className:"h-16 w-full"},s))})})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Tests"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)(l.$,{variant:"outline",onClick:ev,disabled:eo,children:[(0,a.jsx)(n.A,{className:"mr-2 h-4 w-4 ".concat(eo?"animate-spin":"")}),"Refresh"]}),(0,a.jsxs)(l.$,{variant:"outline",onClick:()=>{X(!0)},children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"Generate Test"]}),(0,a.jsxs)(l.$,{onClick:()=>{es(null),W("create"),R(!0)},children:[(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Add Test"]})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-1 min-w-[200px] max-w-sm",children:[(0,a.jsx)(o.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(r.p,{placeholder:"Search tests...",value:Y,onChange:e=>$(e.target.value),className:"pl-8"})]}),(0,a.jsxs)(w.l6,{value:_,onValueChange:B,children:[(0,a.jsx)(w.bq,{className:"w-[180px]",children:(0,a.jsx)(w.yv,{placeholder:"Category"})}),(0,a.jsxs)(w.gC,{children:[(0,a.jsx)(w.eb,{value:"all",children:"All Categories"}),S.map(e=>(0,a.jsxs)(w.eb,{value:e.id,children:[e.icon," ",e.name]},e.id))]})]}),(0,a.jsxs)(w.l6,{value:H,onValueChange:G,children:[(0,a.jsx)(w.bq,{className:"w-[200px]",children:(0,a.jsx)(w.yv,{placeholder:"Test Series"})}),(0,a.jsxs)(w.gC,{children:[(0,a.jsx)(w.eb,{value:"all",children:"All Series"}),E.map(e=>(0,a.jsxs)(w.eb,{value:e.id,children:[e.icon," ",e.title]},e.id))]})]}),(0,a.jsxs)(w.l6,{value:V,onValueChange:U,children:[(0,a.jsx)(w.bq,{className:"w-[140px]",children:(0,a.jsx)(w.yv,{placeholder:"Difficulty"})}),(0,a.jsxs)(w.gC,{children:[(0,a.jsx)(w.eb,{value:"all",children:"All Levels"}),(0,a.jsx)(w.eb,{value:"easy",children:"Easy"}),(0,a.jsx)(w.eb,{value:"medium",children:"Medium"}),(0,a.jsx)(w.eb,{value:"hard",children:"Hard"})]})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[q.length," of ",e.length," tests"]})]}),(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)(N.XI,{children:[(0,a.jsx)(N.A0,{children:(0,a.jsxs)(N.Hj,{children:[(0,a.jsx)(N.nd,{children:"Title"}),(0,a.jsx)(N.nd,{children:"Category"}),(0,a.jsx)(N.nd,{children:"Test Series"}),(0,a.jsx)(N.nd,{className:"w-20",children:"Questions"}),(0,a.jsx)(N.nd,{className:"w-20",children:"Duration"}),(0,a.jsx)(N.nd,{className:"w-24",children:"Difficulty"}),(0,a.jsx)(N.nd,{className:"w-20",children:"Attempts"}),(0,a.jsx)(N.nd,{className:"w-20",children:"Avg Score"}),(0,a.jsx)(N.nd,{className:"text-right w-20",children:"Actions"})]})}),(0,a.jsx)(N.BF,{children:0===q.length?(0,a.jsx)(N.Hj,{children:(0,a.jsx)(N.nA,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:Y||"all"!==_||"all"!==V||"all"!==H?"No tests found matching your filters.":"No tests found. Create your first test to get started."})}):q.map(e=>(0,a.jsxs)(N.Hj,{className:"hover:bg-muted/50",children:[(0,a.jsxs)(N.nA,{children:[(0,a.jsx)("div",{className:"font-medium max-w-[200px] truncate",title:e.title,children:e.title}),e.description&&(0,a.jsx)("div",{className:"text-xs text-muted-foreground max-w-[200px] truncate",title:e.description,children:e.description})]}),(0,a.jsx)(N.nA,{children:(0,a.jsx)(b.E,{variant:"outline",className:"text-xs",children:e.category})}),(0,a.jsx)(N.nA,{children:(0,a.jsx)("div",{className:"text-sm max-w-[150px] truncate",children:ew(e.testSeries)})}),(0,a.jsx)(N.nA,{className:"text-center",children:(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)(b.E,{variant:"secondary",className:"text-xs",children:e.totalQuestions})})}),(0,a.jsx)(N.nA,{className:"text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-1",children:[(0,a.jsx)(m.A,{className:"w-3 h-3 text-muted-foreground"}),(0,a.jsxs)("span",{className:"text-sm",children:[e.duration,"m"]})]})}),(0,a.jsx)(N.nA,{children:(0,a.jsx)(b.E,{variant:"Hard"===e.difficulty?"destructive":"Medium"===e.difficulty?"default":"secondary",children:e.difficulty})}),(0,a.jsx)(N.nA,{className:"text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-1",children:[(0,a.jsx)(x.A,{className:"w-3 h-3 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm",children:e.attempts})]})}),(0,a.jsx)(N.nA,{className:"text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-1",children:[(0,a.jsx)(u.A,{className:"w-3 h-3 text-muted-foreground"}),(0,a.jsxs)("span",{className:"text-sm",children:[e.avgScore.toFixed(1),"%"]})]})}),(0,a.jsx)(N.nA,{className:"text-right",children:(0,a.jsxs)(y.rI,{children:[(0,a.jsx)(y.ty,{asChild:!0,children:(0,a.jsx)(l.$,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,a.jsx)(h.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(y.SQ,{align:"end",children:[(0,a.jsxs)(y._2,{onClick:()=>ep(e),children:[(0,a.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"View Details"]}),(0,a.jsxs)(y._2,{onClick:()=>ef(e),children:[(0,a.jsx)(j.A,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,a.jsxs)(y._2,{onClick:()=>eC(e),children:[(0,a.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Import Questions"]}),(0,a.jsxs)(y._2,{className:"text-red-600 focus:text-red-600",onClick:()=>eN(e),children:[(0,a.jsx)(p.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},e.id))})]})}),(0,a.jsx)(J,{isOpen:z,onClose:()=>R(!1),test:ee,mode:Z,onSuccess:eb}),(0,a.jsx)(D,{isOpen:K,onClose:()=>X(!1),onSuccess:eb}),(0,a.jsx)(L.Lt,{open:er,onOpenChange:en,children:(0,a.jsxs)(L.EO,{children:[(0,a.jsxs)(L.wd,{children:[(0,a.jsx)(L.r7,{children:"Are you sure?"}),(0,a.jsxs)(L.$v,{children:['This action cannot be undone. This will permanently delete the test "',null==ec?void 0:ec.title,'" and may affect user progress and results.']})]}),(0,a.jsxs)(L.ck,{children:[(0,a.jsx)(L.Zr,{disabled:ei,children:"Cancel"}),(0,a.jsxs)(L.Rx,{onClick:ey,disabled:ei,className:"bg-red-600 hover:bg-red-700",children:[ei&&(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}),ei?"Deleting...":"Delete"]})]})]})}),(0,a.jsx)(O.O,{isOpen:eu,onClose:()=>eh(!1),testId:(null==eg?void 0:eg.id)||"",testType:"test",testTitle:(null==eg?void 0:eg.title)||"",onSuccess:eb})]})}},90088:(e,s,t)=>{"use strict";t.d(s,{d:()=>n});var a=t(95155),i=t(12115),l=t(4884),r=t(53999);let n=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(l.bL,{className:(0,r.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...i,ref:s,children:(0,a.jsx)(l.zi,{className:(0,r.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});n.displayName=l.bL.displayName},99474:(e,s,t)=>{"use strict";t.d(s,{T:()=>r});var a=t(95155),i=t(12115),l=t(53999);let r=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...i})});r.displayName="Textarea"}},e=>{var s=s=>e(e.s=s);e.O(0,[2204,9641,8366,2361,9303,7932,1670,180,3900,8441,1684,7358],()=>s(30046)),_N_E=e.O()}]);