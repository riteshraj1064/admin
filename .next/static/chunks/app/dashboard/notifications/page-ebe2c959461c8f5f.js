(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1654],{16559:(e,s,t)=>{"use strict";t.d(s,{$v:()=>p,EO:()=>u,Lt:()=>c,Rx:()=>f,Zr:()=>j,ck:()=>x,r7:()=>h,wd:()=>m});var a=t(95155),i=t(12115),r=t(17649),l=t(53999),n=t(97168);let c=r.bL;r.l9;let d=r.ZL,o=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(r.hJ,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...i,ref:s})});o.displayName=r.hJ.displayName;let u=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(o,{}),(0,a.jsx)(r.UC,{ref:s,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...i})]})});u.displayName=r.UC.displayName;let m=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...t})};m.displayName="AlertDialogHeader";let x=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};x.displayName="AlertDialogFooter";let h=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(r.hE,{ref:s,className:(0,l.cn)("text-lg font-semibold",t),...i})});h.displayName=r.hE.displayName;let p=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(r.VY,{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...i})});p.displayName=r.VY.displayName;let f=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(r.rc,{ref:s,className:(0,l.cn)((0,n.r)(),t),...i})});f.displayName=r.rc.displayName;let j=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(r.ZD,{ref:s,className:(0,l.cn)((0,n.r)({variant:"outline"}),"mt-2 sm:mt-0",t),...i})});j.displayName=r.ZD.displayName},16891:(e,s,t)=>{"use strict";t.d(s,{F:()=>n});var a=t(95155),i=t(12115),r=t(47655),l=t(53999);let n=i.forwardRef((e,s)=>{let{className:t,children:i,...n}=e;return(0,a.jsxs)(r.bL,{ref:s,className:(0,l.cn)("relative overflow-hidden",t),...n,children:[(0,a.jsx)(r.LM,{className:"h-full w-full rounded-[inherit]",children:i}),(0,a.jsx)(c,{}),(0,a.jsx)(r.OK,{})]})});n.displayName=r.bL.displayName;let c=i.forwardRef((e,s)=>{let{className:t,orientation:i="vertical",...n}=e;return(0,a.jsx)(r.VM,{ref:s,orientation:i,className:(0,l.cn)("flex touch-none select-none transition-colors","vertical"===i&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===i&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:(0,a.jsx)(r.lr,{className:"relative flex-1 rounded-full bg-border"})})});c.displayName=r.VM.displayName},17580:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},23861:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},27063:(e,s,t)=>{Promise.resolve().then(t.bind(t,99913))},34964:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>d,av:()=>o,j7:()=>c,tU:()=>n});var a=t(95155),i=t(12115),r=t(60704),l=t(53999);let n=r.bL,c=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(r.B8,{ref:s,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...i})});c.displayName=r.B8.displayName;let d=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(r.l9,{ref:s,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...i})});d.displayName=r.l9.displayName;let o=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(r.UC,{ref:s,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...i})});o.displayName=r.UC.displayName},39953:(e,s,t)=>{"use strict";t.d(s,{d:()=>i});var a=t(25784);let i={getUsers:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await a.k.get("/admin/users",{params:e})).data},getUserById:async e=>(await a.k.get("/admin/user/".concat(e))).data,activateUser:async e=>(await a.k.patch("/admin/user/".concat(e,"/activate"))).data,suspendUser:async e=>(await a.k.patch("/admin/user/".concat(e,"/suspend"))).data,updateUserRole:async(e,s)=>(await a.k.patch("/admin/user/".concat(e,"/role"),{role:s})).data,getUserIds:async()=>(await a.k.get("/admin/users/ids")).data,bulkActivateUsers:async e=>(await a.k.patch("/admin/users/bulk-activate",{userIds:e})).data,bulkSuspendUsers:async e=>(await a.k.patch("/admin/users/bulk-suspend",{userIds:e})).data,bulkUpdateRole:async(e,s)=>(await a.k.patch("/admin/users/bulk-role",{userIds:e,role:s})).data,sendEmail:async(e,s,t)=>(await a.k.post("/admin/users/send-email",{userIds:e,subject:s,message:t})).data,exportUsers:async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(await a.k.get("/admin/users/export",{params:{format:e,...s},responseType:"blob"})).data}}},40646:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19946).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},60704:(e,s,t)=>{"use strict";t.d(s,{B8:()=>E,UC:()=>T,bL:()=>R,l9:()=>U});var a=t(12115),i=t(85185),r=t(46081),l=t(89196),n=t(28905),c=t(63655),d=t(94315),o=t(5845),u=t(61285),m=t(95155),x="Tabs",[h,p]=(0,r.A)(x,[l.RG]),f=(0,l.RG)(),[j,g]=h(x),v=a.forwardRef((e,s)=>{let{__scopeTabs:t,value:a,onValueChange:i,defaultValue:r,orientation:l="horizontal",dir:n,activationMode:x="automatic",...h}=e,p=(0,d.jH)(n),[f,g]=(0,o.i)({prop:a,onChange:i,defaultProp:r});return(0,m.jsx)(j,{scope:t,baseId:(0,u.B)(),value:f,onValueChange:g,orientation:l,dir:p,activationMode:x,children:(0,m.jsx)(c.sG.div,{dir:p,"data-orientation":l,...h,ref:s})})});v.displayName=x;var b="TabsList",y=a.forwardRef((e,s)=>{let{__scopeTabs:t,loop:a=!0,...i}=e,r=g(b,t),n=f(t);return(0,m.jsx)(l.bL,{asChild:!0,...n,orientation:r.orientation,dir:r.dir,loop:a,children:(0,m.jsx)(c.sG.div,{role:"tablist","aria-orientation":r.orientation,...i,ref:s})})});y.displayName=b;var w="TabsTrigger",N=a.forwardRef((e,s)=>{let{__scopeTabs:t,value:a,disabled:r=!1,...n}=e,d=g(w,t),o=f(t),u=A(d.baseId,a),x=S(d.baseId,a),h=a===d.value;return(0,m.jsx)(l.q7,{asChild:!0,...o,focusable:!r,active:h,children:(0,m.jsx)(c.sG.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":x,"data-state":h?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:u,...n,ref:s,onMouseDown:(0,i.m)(e.onMouseDown,e=>{r||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(a)}),onKeyDown:(0,i.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(a)}),onFocus:(0,i.m)(e.onFocus,()=>{let e="manual"!==d.activationMode;h||r||!e||d.onValueChange(a)})})})});N.displayName=w;var k="TabsContent",C=a.forwardRef((e,s)=>{let{__scopeTabs:t,value:i,forceMount:r,children:l,...d}=e,o=g(k,t),u=A(o.baseId,i),x=S(o.baseId,i),h=i===o.value,p=a.useRef(h);return a.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,m.jsx)(n.C,{present:r||h,children:t=>{let{present:a}=t;return(0,m.jsx)(c.sG.div,{"data-state":h?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":u,hidden:!a,id:x,tabIndex:0,...d,ref:s,style:{...e.style,animationDuration:p.current?"0s":void 0},children:a&&l})}})});function A(e,s){return"".concat(e,"-trigger-").concat(s)}function S(e,s){return"".concat(e,"-content-").concat(s)}C.displayName=k;var R=v,E=y,U=N,T=C},76981:(e,s,t)=>{"use strict";t.d(s,{C1:()=>C,bL:()=>k});var a=t(12115),i=t(6101),r=t(46081),l=t(85185),n=t(5845),c=t(45503),d=t(11275),o=t(28905),u=t(63655),m=t(95155),x="Checkbox",[h,p]=(0,r.A)(x),[f,j]=h(x),g=a.forwardRef((e,s)=>{let{__scopeCheckbox:t,name:r,checked:c,defaultChecked:d,required:o,disabled:x,value:h="on",onCheckedChange:p,form:j,...g}=e,[v,b]=a.useState(null),k=(0,i.s)(s,e=>b(e)),C=a.useRef(!1),A=!v||j||!!v.closest("form"),[S=!1,R]=(0,n.i)({prop:c,defaultProp:d,onChange:p}),E=a.useRef(S);return a.useEffect(()=>{let e=null==v?void 0:v.form;if(e){let s=()=>R(E.current);return e.addEventListener("reset",s),()=>e.removeEventListener("reset",s)}},[v,R]),(0,m.jsxs)(f,{scope:t,state:S,disabled:x,children:[(0,m.jsx)(u.sG.button,{type:"button",role:"checkbox","aria-checked":w(S)?"mixed":S,"aria-required":o,"data-state":N(S),"data-disabled":x?"":void 0,disabled:x,value:h,...g,ref:k,onKeyDown:(0,l.m)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,l.m)(e.onClick,e=>{R(e=>!!w(e)||!e),A&&(C.current=e.isPropagationStopped(),C.current||e.stopPropagation())})}),A&&(0,m.jsx)(y,{control:v,bubbles:!C.current,name:r,value:h,checked:S,required:o,disabled:x,form:j,style:{transform:"translateX(-100%)"},defaultChecked:!w(d)&&d})]})});g.displayName=x;var v="CheckboxIndicator",b=a.forwardRef((e,s)=>{let{__scopeCheckbox:t,forceMount:a,...i}=e,r=j(v,t);return(0,m.jsx)(o.C,{present:a||w(r.state)||!0===r.state,children:(0,m.jsx)(u.sG.span,{"data-state":N(r.state),"data-disabled":r.disabled?"":void 0,...i,ref:s,style:{pointerEvents:"none",...e.style}})})});b.displayName=v;var y=e=>{let{control:s,checked:t,bubbles:i=!0,defaultChecked:r,...l}=e,n=a.useRef(null),o=(0,c.Z)(t),u=(0,d.X)(s);a.useEffect(()=>{let e=n.current,s=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==t&&s){let a=new Event("click",{bubbles:i});e.indeterminate=w(t),s.call(e,!w(t)&&t),e.dispatchEvent(a)}},[o,t,i]);let x=a.useRef(!w(t)&&t);return(0,m.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:null!=r?r:x.current,...l,tabIndex:-1,ref:n,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function w(e){return"indeterminate"===e}function N(e){return w(e)?"indeterminate":e?"checked":"unchecked"}var k=g,C=b},88482:(e,s,t)=>{"use strict";t.d(s,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>l,aR:()=>n});var a=t(95155),i=t(12115),r=t(53999);let l=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...i})});l.displayName="Card";let n=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",t),...i})});n.displayName="CardHeader";let c=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",t),...i})});c.displayName="CardTitle";let d=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",t),...i})});d.displayName="CardDescription";let o=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",t),...i})});o.displayName="CardContent",i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",t),...i})}).displayName="CardFooter"},95139:(e,s,t)=>{"use strict";t.d(s,{S:()=>c});var a=t(95155),i=t(12115),r=t(76981),l=t(5196),n=t(53999);let c=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(r.bL,{ref:s,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...i,children:(0,a.jsx)(r.C1,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})})});c.displayName=r.bL.displayName},95784:(e,s,t)=>{"use strict";t.d(s,{bq:()=>m,eb:()=>f,gC:()=>p,l6:()=>o,yv:()=>u});var a=t(95155),i=t(12115),r=t(31992),l=t(66474),n=t(47863),c=t(5196),d=t(53999);let o=r.bL;r.YJ;let u=r.WT,m=i.forwardRef((e,s)=>{let{className:t,children:i,...n}=e;return(0,a.jsxs)(r.l9,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[i,(0,a.jsx)(r.In,{asChild:!0,children:(0,a.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=r.l9.displayName;let x=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(r.PP,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...i,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});x.displayName=r.PP.displayName;let h=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(r.wn,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...i,children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})});h.displayName=r.wn.displayName;let p=i.forwardRef((e,s)=>{let{className:t,children:i,position:l="popper",...n}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsxs)(r.UC,{ref:s,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...n,children:[(0,a.jsx)(x,{}),(0,a.jsx)(r.LM,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),(0,a.jsx)(h,{})]})})});p.displayName=r.UC.displayName,i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(r.JU,{ref:s,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...i})}).displayName=r.JU.displayName;let f=i.forwardRef((e,s)=>{let{className:t,children:i,...l}=e;return(0,a.jsxs)(r.q7,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(c.A,{className:"h-4 w-4"})})}),(0,a.jsx)(r.p4,{children:i})]})});f.displayName=r.q7.displayName,i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)(r.wv,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...i})}).displayName=r.wv.displayName},99474:(e,s,t)=>{"use strict";t.d(s,{T:()=>l});var a=t(95155),i=t(12115),r=t(53999);let l=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,a.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...i})});l.displayName="Textarea"},99913:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>z});var a=t(95155),i=t(12115),r=t(97168),l=t(89852),n=t(40646),c=t(19946);let d=(0,c.A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),o=(0,c.A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),u=(0,c.A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var m=t(53904),x=t(84616),h=t(23861),p=t(47924),f=t(5623),j=t(92657),g=t(13717),v=t(62525),b=t(51154),y=t(88524),w=t(67133),N=t(88145),k=t(95784),C=t(88482),A=t(99840),S=t(82714),R=t(99474),E=t(34964),U=t(95139),T=t(16891),I=t(17580),L=t(25784);let F={getNotifications:async function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],(await L.k.get("/push")).data},createNotification:async e=>(await L.k.post("/push/send",e)).data,updateNotification:async(e,s)=>(await L.k.put("/admin/notifications/".concat(e),s)).data,deleteNotification:async e=>(await L.k.delete("/push/".concat(e))).data,getStats:async()=>(await L.k.get("/push/stats")).data};var P=t(39953),D=t(53580),M=t(49509);class B{async init(){if(!("serviceWorker"in navigator)||!("PushManager"in window))return console.warn("Push notifications not supported"),!1;try{let e=await navigator.serviceWorker.ready,s=await e.pushManager.getSubscription();if(s)return this.subscription=s,!0;return!1}catch(e){return console.error("Failed to initialize push notifications:",e),!1}}async subscribe(){if(!("serviceWorker"in navigator)||!("PushManager"in window))throw Error("Push notifications not supported");try{let e=await navigator.serviceWorker.ready,s=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.urlBase64ToUint8Array(this.vapidPublicKey)});return this.subscription=s,await this.sendSubscriptionToServer(s),s}catch(e){throw console.error("Failed to subscribe to push notifications:",e),e}}async unsubscribe(){if(!this.subscription)return!0;try{let e=await this.subscription.unsubscribe();return e&&(await this.removeSubscriptionFromServer(),this.subscription=null),e}catch(e){return console.error("Failed to unsubscribe from push notifications:",e),!1}}async sendToUser(e,s){try{return(await L.A.post("/push/user/".concat(e),s)).data}catch(e){throw console.error("Failed to send push notification to user:",e),e}}async sendToAll(e){try{return(await L.A.post("/push/all",e)).data}catch(e){throw console.error("Failed to send push notification to all users:",e),e}}async sendToBatch(e,s){try{return(await L.A.post("/push/batch",{userIds:e,...s})).data}catch(e){throw console.error("Failed to send push notification to batch:",e),e}}async sendNotification(e){let{recipients:s,...t}=e;switch(s.type){case"all":return this.sendToAll(t);case"user":if(!s.userId)throw Error("User ID is required for user-specific notifications");return this.sendToUser(s.userId,t);case"batch":if(!s.userIds||0===s.userIds.length)throw Error("User IDs are required for batch notifications");return this.sendToBatch(s.userIds,t);default:throw Error("Invalid recipient type")}}getSubscription(){return this.subscription}isSupported(){return"serviceWorker"in navigator&&"PushManager"in window}async getPermission(){return"Notification"in window?Notification.permission:"denied"}async requestPermission(){return"Notification"in window?"default"===Notification.permission?await Notification.requestPermission():Notification.permission:"denied"}urlBase64ToUint8Array(e){let s="=".repeat((4-e.length%4)%4),t=(e+s).replace(/-/g,"+").replace(/_/g,"/"),a=window.atob(t),i=new Uint8Array(a.length);for(let e=0;e<a.length;++e)i[e]=a.charCodeAt(e);return i}async sendSubscriptionToServer(e){try{await L.A.post("/api/push/subscribe",{subscription:e})}catch(e){console.error("Failed to send subscription to server:",e)}}async removeSubscriptionFromServer(){try{await L.A.post("/api/push/unsubscribe")}catch(e){console.error("Failed to remove subscription from server:",e)}}constructor(){this.subscription=null,this.vapidPublicKey=M.env.NEXT_PUBLIC_VAPID_PUBLIC_KEY||""}}let q=new B;function _(e){var s,t,c;let{open:m,onOpenChange:x,notification:p,mode:f,onSuccess:j}=e,[g,v]=(0,i.useState)(!1),[y,w]=(0,i.useState)([]),[L,M]=(0,i.useState)([]),[B,_]=(0,i.useState)({title:"",message:"",type:"info",priority:"medium",recipients:{type:"all"},data:{url:""}}),[Z,z]=(0,i.useState)(!1),{toast:V}=(0,D.dj)();(0,i.useEffect)(()=>{m&&(J(),p&&("edit"===f||"view"===f)?(_({title:p.title,message:p.message,type:p.type,priority:p.priority,recipients:p.recipients,expiresAt:p.expiresAt,data:p.data||{url:""}}),p.recipients.userIds&&M(p.recipients.userIds)):(_({title:"",message:"",type:"info",priority:"medium",recipients:{type:"all"},data:{url:""}}),M([])))},[m,p,f]);let J=async()=>{try{let e=await P.d.getUsers({limit:1e3});w(e.users)}catch(e){console.error("Error fetching users:",e)}},W=async e=>{if(e.preventDefault(),"view"!==f){if(!B.title.trim()||!B.message.trim()){V({title:"Error",description:"Title and message are required",variant:"destructive"});return}v(!0);try{var s;let e={...B,recipients:{...B.recipients,userIds:"specific"===B.recipients.type?L:void 0},data:{url:(null===(s=B.data)||void 0===s?void 0:s.url)||""}};if("create"===f?(await F.createNotification(e),V({title:"Success",description:"Notification created successfully"})):(await F.updateNotification(p._id,e),V({title:"Success",description:"Notification updated successfully"})),null==j||j(),x(!1),Z)try{let e={title:B.title,message:B.message,type:B.type,priority:B.priority,data:{notificationId:(null==p?void 0:p._id)||"new"}};"all"===B.recipients.type?await q.sendToAll(e):"specific"===B.recipients.type&&L.length>0&&await q.sendToBatch(L,e),V({title:"Success",description:"Push notification sent successfully"})}catch(e){console.error("Failed to send push notification:",e),V({title:"Warning",description:"Notification created but push notification failed",variant:"destructive"})}}catch(e){V({title:"Error",description:"Failed to ".concat(f," notification"),variant:"destructive"}),console.error("Error ".concat(f,"ing notification:"),e)}finally{v(!1)}}},O=(e,s)=>{s?M(s=>[...s,e]):M(s=>s.filter(s=>s!==e))};return(0,a.jsx)(A.lG,{open:m,onOpenChange:x,children:(0,a.jsxs)(A.Cf,{className:"max-w-4xl w-full max-w-full max-h-[90vh] bg-white dark:bg-slate-900 overflow-y-auto mx-2 sm:mx-auto rounded-xl p-2 sm:p-6",children:[(0,a.jsx)(A.c7,{children:(0,a.jsxs)(A.L3,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[(0,a.jsx)(h.A,{className:"h-5 w-5"}),"create"===f?"Create Notification":"edit"===f?"Edit Notification":"Notification Details"]})}),(0,a.jsxs)("form",{onSubmit:W,className:"space-y-6",children:[(0,a.jsxs)(E.tU,{defaultValue:"content",className:"w-full",children:[(0,a.jsxs)(E.j7,{className:"grid w-full grid-cols-2 h-auto",children:[(0,a.jsx)(E.Xi,{value:"content",className:"text-xs sm:text-sm",children:"Content"}),(0,a.jsx)(E.Xi,{value:"recipients",className:"text-xs sm:text-sm",children:"Recipients"})]}),(0,a.jsxs)(E.av,{value:"content",className:"space-y-4 mt-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"title",className:"text-sm",children:"Title *"}),(0,a.jsx)(l.p,{id:"title",placeholder:"Enter notification title",value:B.title,onChange:e=>_({...B,title:e.target.value}),disabled:"view"===f,required:!0,className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"type",className:"text-sm",children:"Type"}),(0,a.jsxs)(k.l6,{value:B.type,onValueChange:e=>_({...B,type:e}),disabled:"view"===f,children:[(0,a.jsx)(k.bq,{className:"w-full",children:(0,a.jsx)(k.yv,{})}),(0,a.jsxs)(k.gC,{children:[(0,a.jsx)(k.eb,{value:"info",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u,{className:"h-4 w-4"}),"Info"]})}),(0,a.jsx)(k.eb,{value:"success",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),"Success"]})}),(0,a.jsx)(k.eb,{value:"warning",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d,{className:"h-4 w-4"}),"Warning"]})}),(0,a.jsx)(k.eb,{value:"error",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o,{className:"h-4 w-4"}),"Error"]})})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"priority",className:"text-sm",children:"Priority"}),(0,a.jsxs)(k.l6,{value:B.priority,onValueChange:e=>_({...B,priority:e}),disabled:"view"===f,children:[(0,a.jsx)(k.bq,{className:"w-full",children:(0,a.jsx)(k.yv,{})}),(0,a.jsxs)(k.gC,{children:[(0,a.jsx)(k.eb,{value:"low",children:"Low"}),(0,a.jsx)(k.eb,{value:"medium",children:"Medium"}),(0,a.jsx)(k.eb,{value:"high",children:"High"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"expires",className:"text-sm",children:"Expires At (Optional)"}),(0,a.jsx)(l.p,{id:"expires",type:"datetime-local",value:B.expiresAt?new Date(B.expiresAt).toISOString().slice(0,16):"",onChange:e=>_({...B,expiresAt:e.target.value?new Date(e.target.value).toISOString():void 0}),disabled:"view"===f,className:"w-full"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"message",className:"text-sm",children:"Message *"}),(0,a.jsx)(R.T,{id:"message",placeholder:"Enter notification message",value:B.message,onChange:e=>_({...B,message:e.target.value}),disabled:"view"===f,required:!0,rows:6,className:"w-full resize-none"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"url",className:"text-sm",children:"URL (optional)"}),(0,a.jsx)(l.p,{id:"url",placeholder:"Enter URL (e.g. /tabs/series)",value:(null===(s=B.data)||void 0===s?void 0:s.url)||"",onChange:e=>_({...B,data:{...B.data,url:e.target.value}}),disabled:"view"===f,className:"w-full"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"This URL will be sent with the notification data."})]}),"view"===f&&p&&(0,a.jsxs)(C.Zp,{children:[(0,a.jsx)(C.aR,{children:(0,a.jsx)(C.ZB,{className:"text-lg",children:"Preview"})}),(0,a.jsx)(C.Wu,{children:(0,a.jsx)("div",{className:"p-4 rounded-lg border ".concat((e=>{switch(e){case"success":return"bg-green-100 text-green-800 border-green-200";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"error":return"bg-red-100 text-red-800 border-red-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}})(p.type)),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(e=>{switch(e){case"success":return(0,a.jsx)(n.A,{className:"h-4 w-4"});case"warning":return(0,a.jsx)(d,{className:"h-4 w-4"});case"error":return(0,a.jsx)(o,{className:"h-4 w-4"});default:return(0,a.jsx)(u,{className:"h-4 w-4"})}})(p.type),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("h4",{className:"font-medium",children:p.title}),(0,a.jsx)(N.E,{className:(e=>{switch(e){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-green-100 text-green-800 border-green-200"}})(p.priority),children:p.priority})]}),(0,a.jsx)("p",{className:"text-sm",children:p.message}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{children:["From: ",p.sender.name]}),(0,a.jsx)("span",{children:new Date(p.createdAt).toLocaleString()})]})]})]})})})]})]}),(0,a.jsx)(E.av,{value:"recipients",className:"space-y-4 mt-4",children:(0,a.jsxs)(C.Zp,{children:[(0,a.jsxs)(C.aR,{children:[(0,a.jsxs)(C.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,a.jsx)(I.A,{className:"h-5 w-5"}),"Select Recipients"]}),(0,a.jsx)(C.BT,{className:"text-sm",children:"Choose who will receive this notification"})]}),(0,a.jsxs)(C.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{className:"text-sm",children:"Recipient Type"}),(0,a.jsxs)(k.l6,{value:B.recipients.type,onValueChange:e=>_({...B,recipients:{...B.recipients,type:e}}),disabled:"view"===f,children:[(0,a.jsx)(k.bq,{className:"w-full",children:(0,a.jsx)(k.yv,{})}),(0,a.jsxs)(k.gC,{children:[(0,a.jsx)(k.eb,{value:"all",children:"All Users"}),(0,a.jsx)(k.eb,{value:"role",children:"By Role"}),(0,a.jsx)(k.eb,{value:"specific",children:"Specific Users"})]})]})]}),"role"===B.recipients.type&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{className:"text-sm",children:"Select Roles"}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:["admin","teacher","student","user"].map(e=>{var s;return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U.S,{id:e,checked:(null===(s=B.recipients.roles)||void 0===s?void 0:s.includes(e))||!1,onCheckedChange:s=>{let t=B.recipients.roles||[],a=s?[...t,e]:t.filter(s=>s!==e);_({...B,recipients:{...B.recipients,roles:a}})},disabled:"view"===f}),(0,a.jsx)(S.J,{htmlFor:e,className:"text-sm capitalize",children:e})]},e)})})]}),"specific"===B.recipients.type&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(S.J,{className:"text-sm",children:["Select Users (",L.length," selected)"]}),(0,a.jsx)(T.F,{className:"h-64 border rounded-md p-2 sm:p-4",children:(0,a.jsx)("div",{className:"space-y-2",children:y.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U.S,{id:e._id,checked:L.includes(e._id),onCheckedChange:s=>O(e._id,s),disabled:"view"===f}),(0,a.jsxs)(S.J,{htmlFor:e._id,className:"flex-1 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:e.name}),(0,a.jsx)(N.E,{variant:"outline",className:"text-xs",children:e.role})]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.email})]})]},e._id))})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U.S,{id:"pushNotification",checked:Z,onCheckedChange:e=>z(e),disabled:"view"===f}),(0,a.jsx)(S.J,{htmlFor:"pushNotification",className:"text-sm",children:"Send as push notification"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Users will receive a real-time push notification on their devices"})]}),"view"===f&&p&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"Recipients Summary"}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["all"===p.recipients.type&&"All users will receive this notification","role"===p.recipients.type&&"Users with roles: ".concat(null===(t=p.recipients.roles)||void 0===t?void 0:t.join(", ")),"specific"===p.recipients.type&&"".concat((null===(c=p.recipients.userIds)||void 0===c?void 0:c.length)||0," specific users selected")]})]})]})]})})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-2 pt-4 border-t",children:[(0,a.jsx)(r.$,{type:"button",variant:"outline",onClick:()=>x(!1),className:"w-full sm:w-auto",children:"view"===f?"Close":"Cancel"}),"view"!==f&&(0,a.jsxs)(r.$,{type:"submit",disabled:g,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white",children:[g&&(0,a.jsx)(b.A,{className:"h-4 w-4 mr-2 animate-spin"}),"create"===f?"Create Notification":"Update Notification"]})]})]})]})})}var Z=t(16559);function z(){let[e,s]=(0,i.useState)([]),[t,c]=(0,i.useState)(!0),[A,S]=(0,i.useState)(""),[R,E]=(0,i.useState)("all"),[U,T]=(0,i.useState)("all"),[I,L]=(0,i.useState)(!1),[P,M]=(0,i.useState)("create"),[B,q]=(0,i.useState)(null),[z,V]=(0,i.useState)(!1),[J,W]=(0,i.useState)(null),[O,H]=(0,i.useState)(!1),[K,G]=(0,i.useState)({total:0,active:0,byType:{},byPriority:{}}),[$,X]=(0,i.useState)({page:1,limit:10,total:0}),{toast:Y}=(0,D.dj)();(0,i.useEffect)(()=>{Q(),ee()},[$.page,R,U,A]);let Q=async()=>{c(!0);try{let e=await F.getNotifications({page:$.page,limit:$.limit,type:"all"===R?void 0:R,priority:"all"===U?void 0:U}),t=e.notifications;A&&(t=e.notifications.filter(e=>e.title.toLowerCase().includes(A.toLowerCase())||e.message.toLowerCase().includes(A.toLowerCase()))),s(t),X(s=>({...s,total:e.total}))}catch(e){Y({title:"Error",description:"Failed to fetch notifications",variant:"destructive"}),console.error("Error fetching notifications:",e)}finally{c(!1)}},ee=async()=>{try{let e=await F.getStats();G(e)}catch(e){console.error("Error fetching stats:",e)}},es=e=>{q(e),M("view"),L(!0)},et=e=>{q(e),M("edit"),L(!0)},ea=e=>{W(e),V(!0)},ei=async()=>{if(J){H(!0);try{await F.deleteNotification(J._id),Y({title:"Success",description:"Notification deleted successfully"}),Q(),ee()}catch(e){Y({title:"Error",description:"Failed to delete notification",variant:"destructive"}),console.error("Error deleting notification:",e)}finally{H(!1),V(!1),W(null)}}},er=e=>{switch(e){case"success":return(0,a.jsx)(n.A,{className:"h-4 w-4"});case"warning":return(0,a.jsx)(d,{className:"h-4 w-4"});case"error":return(0,a.jsx)(o,{className:"h-4 w-4"});default:return(0,a.jsx)(u,{className:"h-4 w-4"})}},el=e=>{switch(e){case"success":return"bg-green-100 text-green-800 border-green-200";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"error":return"bg-red-100 text-red-800 border-red-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}},en=e=>{switch(e){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-green-100 text-green-800 border-green-200"}},ec=e=>{var s,t;switch(e.type){case"all":return"All Users";case"role":return"Roles: ".concat((null===(s=e.roles)||void 0===s?void 0:s.join(", "))||"None");case"specific":return"".concat((null===(t=e.userIds)||void 0===t?void 0:t.length)||0," Users");default:return"Unknown"}},ed=Math.ceil($.total/$.limit);return(0,a.jsxs)("div",{className:"space-y-6 p-4 sm:p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Notification Center"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Send and manage notifications to users"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[(0,a.jsxs)(r.$,{variant:"outline",onClick:Q,disabled:t,className:"w-full sm:w-auto bg-transparent",children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4 ".concat(t?"animate-spin":"")}),"Refresh"]}),(0,a.jsxs)(r.$,{onClick:()=>{q(null),M("create"),L(!0)},className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white",children:[(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Create Notification"]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)(C.Zp,{children:[(0,a.jsxs)(C.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(C.ZB,{className:"text-sm font-medium",children:"Total"}),(0,a.jsx)(h.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(C.Wu,{children:(0,a.jsx)("div",{className:"text-xl sm:text-2xl font-bold",children:K.total})})]}),(0,a.jsxs)(C.Zp,{children:[(0,a.jsxs)(C.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(C.ZB,{className:"text-sm font-medium",children:"Active"}),(0,a.jsx)(n.A,{className:"h-4 w-4 text-green-600"})]}),(0,a.jsx)(C.Wu,{children:(0,a.jsx)("div",{className:"text-xl sm:text-2xl font-bold",children:K.active})})]}),(0,a.jsxs)(C.Zp,{children:[(0,a.jsxs)(C.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(C.ZB,{className:"text-sm font-medium",children:"High Priority"}),(0,a.jsx)(d,{className:"h-4 w-4 text-red-600"})]}),(0,a.jsx)(C.Wu,{children:(0,a.jsx)("div",{className:"text-xl sm:text-2xl font-bold",children:K.byPriority.high||0})})]}),(0,a.jsxs)(C.Zp,{children:[(0,a.jsxs)(C.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(C.ZB,{className:"text-sm font-medium",children:"Errors"}),(0,a.jsx)(o,{className:"h-4 w-4 text-red-600"})]}),(0,a.jsx)(C.Wu,{children:(0,a.jsx)("div",{className:"text-xl sm:text-2xl font-bold",children:K.byType.error||0})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,a.jsx)(p.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(l.p,{placeholder:"Search notifications...",value:A,onChange:e=>S(e.target.value),className:"pl-8"})]}),(0,a.jsxs)(k.l6,{value:R,onValueChange:E,children:[(0,a.jsx)(k.bq,{className:"w-full sm:w-[150px]",children:(0,a.jsx)(k.yv,{placeholder:"Type"})}),(0,a.jsxs)(k.gC,{children:[(0,a.jsx)(k.eb,{value:"all",children:"All Types"}),(0,a.jsx)(k.eb,{value:"info",children:"Info"}),(0,a.jsx)(k.eb,{value:"success",children:"Success"}),(0,a.jsx)(k.eb,{value:"warning",children:"Warning"}),(0,a.jsx)(k.eb,{value:"error",children:"Error"})]})]}),(0,a.jsxs)(k.l6,{value:U,onValueChange:T,children:[(0,a.jsx)(k.bq,{className:"w-full sm:w-[150px]",children:(0,a.jsx)(k.yv,{placeholder:"Priority"})}),(0,a.jsxs)(k.gC,{children:[(0,a.jsx)(k.eb,{value:"all",children:"All Priorities"}),(0,a.jsx)(k.eb,{value:"low",children:"Low"}),(0,a.jsx)(k.eb,{value:"medium",children:"Medium"}),(0,a.jsx)(k.eb,{value:"high",children:"High"})]})]})]}),(0,a.jsx)("div",{className:"rounded-md border overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(y.XI,{children:[(0,a.jsx)(y.A0,{children:(0,a.jsxs)(y.Hj,{children:[(0,a.jsx)(y.nd,{className:"min-w-[200px]",children:"Title"}),(0,a.jsx)(y.nd,{className:"hidden sm:table-cell",children:"Type"}),(0,a.jsx)(y.nd,{className:"hidden md:table-cell",children:"Priority"}),(0,a.jsx)(y.nd,{className:"hidden lg:table-cell",children:"Recipients"}),(0,a.jsx)(y.nd,{className:"hidden sm:table-cell",children:"Created"}),(0,a.jsx)(y.nd,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(y.BF,{children:t?Array.from({length:5}).map((e,s)=>(0,a.jsxs)(y.Hj,{children:[(0,a.jsx)(y.nA,{children:(0,a.jsx)("div",{className:"h-4 w-32 bg-muted animate-pulse rounded"})}),(0,a.jsx)(y.nA,{className:"hidden sm:table-cell",children:(0,a.jsx)("div",{className:"h-4 w-16 bg-muted animate-pulse rounded"})}),(0,a.jsx)(y.nA,{className:"hidden md:table-cell",children:(0,a.jsx)("div",{className:"h-4 w-16 bg-muted animate-pulse rounded"})}),(0,a.jsx)(y.nA,{className:"hidden lg:table-cell",children:(0,a.jsx)("div",{className:"h-4 w-20 bg-muted animate-pulse rounded"})}),(0,a.jsx)(y.nA,{className:"hidden sm:table-cell",children:(0,a.jsx)("div",{className:"h-4 w-20 bg-muted animate-pulse rounded"})}),(0,a.jsx)(y.nA,{children:(0,a.jsx)("div",{className:"h-4 w-8 bg-muted animate-pulse rounded ml-auto"})})]},s)):0===e.length?(0,a.jsx)(y.Hj,{children:(0,a.jsxs)(y.nA,{colSpan:6,className:"text-center py-8",children:[(0,a.jsx)(h.A,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"No notifications found"})]})}):e.map(e=>(0,a.jsxs)(y.Hj,{children:[(0,a.jsxs)(y.nA,{className:"min-w-[200px]",children:[(0,a.jsx)("div",{className:"font-medium truncate",title:e.title,children:e.title}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground truncate mt-1 sm:hidden",children:e.message})]}),(0,a.jsx)(y.nA,{className:"hidden sm:table-cell",children:(0,a.jsx)(N.E,{className:"".concat(el(e.type)," text-xs"),children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[er(e.type),(0,a.jsx)("span",{className:"capitalize",children:e.type})]})})}),(0,a.jsx)(y.nA,{className:"hidden md:table-cell",children:(0,a.jsx)(N.E,{className:"".concat(en(e.priority)," text-xs"),children:e.priority.charAt(0).toUpperCase()+e.priority.slice(1)})}),(0,a.jsx)(y.nA,{className:"hidden lg:table-cell",children:(0,a.jsx)("div",{className:"text-sm",children:ec(e.recipients)})}),(0,a.jsx)(y.nA,{className:"hidden sm:table-cell",children:(0,a.jsx)("div",{className:"text-sm",children:new Date(e.createdAt).toLocaleDateString()})}),(0,a.jsx)(y.nA,{className:"text-right",children:(0,a.jsxs)(w.rI,{children:[(0,a.jsx)(w.ty,{asChild:!0,children:(0,a.jsx)(r.$,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,a.jsx)(f.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(w.SQ,{align:"end",children:[(0,a.jsxs)(w._2,{onClick:()=>es(e),children:[(0,a.jsx)(j.A,{className:"mr-2 h-4 w-4"}),"View Details"]}),(0,a.jsxs)(w._2,{onClick:()=>et(e),children:[(0,a.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,a.jsxs)(w._2,{className:"text-red-600",onClick:()=>ea(e),children:[(0,a.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},e._id))})]})})}),ed>1&&(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,a.jsxs)("p",{className:"text-sm text-muted-foreground text-center sm:text-left",children:["Showing ",($.page-1)*$.limit+1," to"," ",Math.min($.page*$.limit,$.total)," of ",$.total," notifications"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>X(e=>({...e,page:e.page-1})),disabled:1===$.page,children:"Previous"}),(0,a.jsxs)("span",{className:"text-sm",children:["Page ",$.page," of ",ed]}),(0,a.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>X(e=>({...e,page:e.page+1})),disabled:$.page===ed,children:"Next"})]})]}),(0,a.jsx)(_,{open:I,onOpenChange:L,notification:B,mode:P,onSuccess:()=>{Q(),ee()}}),(0,a.jsx)(Z.Lt,{open:z,onOpenChange:V,children:(0,a.jsxs)(Z.EO,{className:"mx-4 sm:mx-auto",children:[(0,a.jsxs)(Z.wd,{children:[(0,a.jsx)(Z.r7,{children:"Are you sure?"}),(0,a.jsxs)(Z.$v,{children:['This action cannot be undone. This will permanently delete the notification "',null==J?void 0:J.title,'".']})]}),(0,a.jsxs)(Z.ck,{className:"flex-col sm:flex-row gap-2",children:[(0,a.jsx)(Z.Zr,{disabled:O,className:"w-full sm:w-auto",children:"Cancel"}),(0,a.jsxs)(Z.Rx,{onClick:ei,disabled:O,className:"w-full sm:w-auto bg-red-600 hover:bg-red-700",children:[O&&(0,a.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),O?"Deleting...":"Delete"]})]})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[2204,9641,8366,2361,9303,7932,9111,180,8441,1684,7358],()=>s(27063)),_N_E=e.O()}]);